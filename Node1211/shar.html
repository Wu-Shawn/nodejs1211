<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body{
            margin: 0;
            position: relative;
        }
        img{
            position:absolute;
        }
        div{
            width: 300px;
            height: 300px;
            border: 1px solid black;
            position: absolute;
            left: 200px;
            top: 200px;
        }
    </style>

</head>
<body>
<img id="p" src="p3.png" alt="" draggable="true">
<div id="div1"></div>

<script>
    var p3 = document.getElementById("p");
    var oDiv1 = document.getElementById("div1")

    var offsetX = null;
    var offsetY = null;
    //ondragstart：源对象开始被拖动
    p3.ondragstart = function (ev) {
        console.log("p3正在被拖动");
        offsetX = ev.offsetX;
        offsetY = ev.offsetY;
        console.log(offsetX,offsetY)
    }


    //ondrag：源对象被拖动过程中
    p3.ondrag = function (ev) {
        // console.log("p3正在拖动中");
        var x = ev.pageX;
        var y = ev.pageY;

        //drag事件最后一刻，无法读取鼠标的坐标，pageX和pageY都变为0
        if(x==0 && y==0){
            return; //不处理拖动最后一刻X和Y都为0的情形
        }

        // console.log(x,y);

        x-=offsetX;
        y-=offsetY;

        p3.style.left= x+"px";
        p3.style.top= y+"px";


    };

    p3.ondragend=function(){
        console.log('源对象p3拖动结束');
    }


    //源对象进入目标对象
    oDiv1.ondragenter = function () {
        console.log("drag enter")
    };

    //
    oDiv1.ondragover = function () {
        console.log("drag over")
    }

    //源对象离开目标对象
    oDiv1.ondragleave = function () {
        console.log("drag leave")
    };

    //ondrop：源对象拖动着在目标对象上方释放/松手
    oDiv1.ondrop = function (ev) {
        console.log("drop")
    }





</script>

</body>
</html>